#!/bin/bash

# claude-xai: Rhymes with "Claude's eye", the Anthropic viewpoint.

eecho() {
    echo "$@" >&2
}

ENV_FILE=".auxiliary/secrets/xai-api.env"

if [[ ! -f "${ENV_FILE}" ]]; then
    eecho "Error: Environment file not found at '${ENV_FILE}'."
    eecho "Please create the file with your X.ai (Grok) API key."
    exit 1
fi

source "${ENV_FILE}"

if [[ -z "${XAI_API_KEY}" ]]; then
    eecho "Error: XAI_API_KEY not found in '${ENV_FILE}'."
    eecho "Please set XAI_API_KEY=your_api_key in the environment file."
    exit 1
fi

export ANTHROPIC_BASE_URL="https://api.x.ai"
export ANTHROPIC_AUTH_TOKEN="${XAI_API_KEY}"
export ANTHROPIC_MODEL="grok-code-fast-1"
export ANTHROPIC_SMALL_FAST_MODEL="grok-code-fast-1"

eecho "Anthropic API URL: ${ANTHROPIC_BASE_URL}"
eecho "Claude Model: ${ANTHROPIC_MODEL}"

exec claude "$@"
